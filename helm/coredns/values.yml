---
replicaCount: 2

serviceType: "LoadBalancer"

prometheus:
  service:
    enabled: true
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "9153"
  monitor:
    enabled: true
    additionalLabels: {}
    namespace: ""
    interval: ""

service:
  clusterIP: "10.32.0.254"

customLabels:
  kalexlab.xyz/ip-pool: coredns

servers:
  - zones:
      - zone: .
    port: 53
    # If serviceType is nodePort you can specify nodePort here
    # nodePort: 30053
    # hostPort: 53
    plugins:
      # - name: debug
      # - name: log
      - name: errors
      # Serves a /health endpoint on :8080, required for livenessProbe
      - name: health
        configBlock: |-
          lameduck 5s
      # Serves a /ready endpoint on :8181, required for readinessProbe
      - name: ready
      # Required to query kubernetes API for data
      - name: kubernetes
        parameters: cluster.local in-addr.arpa ip6.arpa
        configBlock: |-
          pods insecure
          fallthrough in-addr.arpa ip6.arpa
          ttl 30

      - name: forward
        parameters: ". 10.32.0.253 1.1.1.1"
        configBlock: |-
          policy sequential

      - name: prometheus
        parameters: 0.0.0.0:9153

      - name: loop
      - name: reload
      - name: loadbalance
